(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{317:function(t,e,i){},414:function(t,e,i){"use strict";i(317)},565:function(t,e,i){"use strict";i.r(e);i(92);var s={name:"LeeScrollLyrics",inheritAttrs:!1,data:()=>({progress:0,text:[],playStatus:!1,media:null,set:null,scrollY:0,mcurtime:0,mduration:1,press:!1}),watch:{playStatus:{immediate:!0,handler(t){t?this.set=setInterval(()=>{this.action()},1):clearInterval(this.set)}},press:{immediate:!0,handler(t){t?clearInterval(this.set):this.playStatus?this.set=setInterval(()=>{this.action()},1):0!=this.mcurtime&&(this.playStatus=!0,this.media.play())}}},computed:{theStyle(){let t,e;return t="fit"===this.width?"100%":this.width+"px",e="fit"===this.height?"100%":this.height+"px","width:"+t+";height:"+e+";--activeColor:"+this.activeColor}},mounted(){this.media=this.$refs.media;let t=this;fetch(this.lyrics).then((function(t){return t.text()})).then((function(e){e.split("\n").forEach((e,i)=>{let s=e.split("]");null==s[1]&&(s[1]=""),t.text.push({xh:i+1,time:s[0]+"]",text:s[1]})})})),document.addEventListener("mouseup",()=>{this.mcurtime!=this.progress/100*this.mduration&&(this.press=!1,this.media.currentTime=this.progress/100*this.mduration)})},methods:{action(){this.mcurtime=this.media.currentTime,this.mduration=this.media.duration,this.progress=this.mcurtime/this.mduration*100,this.text.forEach(t=>{this.$set(t,"cur",!1)});let t=this.text.filter(t=>{let e=60*Number(t.time.substr(1,2))+Number(t.time.substring(4,t.time.length-1));return this.media.currentTime-e>=0});this.$set(t[t.length-1],"cur",!0);let e=.8*this.height/this.lineHeight;e=Math.floor(e/2),t[t.length-1].xh>e&&this.scrollY<e*this.lineHeight?this.scrollY=-this.lineHeight*(t[t.length-1].xh-e):this.scrollY=0},bf(){this.media.play(),this.playStatus=!0},zt(){this.media.pause(),this.playStatus=!1}},props:{width:[String,Number],height:[String,Number],audio:{type:String,default:"/scrolllyrics/lxl.mp3"},lyrics:{type:String,default:"/scrolllyrics/lxl.txt"},bgPic:{type:String,default:""},bgColor:{type:String,default:"#46bd87"},color:{type:String,default:"#000"},activeColor:{type:String,default:"#46bd87"},lineHeight:{type:Number,default:36}}},r=(i(414),i(10)),l=Object(r.a)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"scroll-lyrics",style:t.theStyle},[e("div",{staticClass:"mark"}),t._v(" "),e("lee-slide",{staticStyle:{position:"absolute",width:"100%",bottom:"0","z-index":"1"},attrs:{theme:"green"},on:{touchstart:function(e){t.press=!0},touchend:function(e){t.press=!1,t.media.currentTime=t.progress/100*t.mduration},mousedown:function(e){t.press=!0},mouseup:function(e){t.press=!1,t.media.currentTime=t.progress/100*t.mduration}},model:{value:t.progress,callback:function(e){t.progress=e},expression:"progress"}}),t._v(" "),t.playStatus?e("lee-button",{attrs:{type:"leecolor"},on:{click:t.zt}},[t._v("停止")]):e("lee-button",{attrs:{type:"default"},on:{click:t.bf}},[t._v("播放")]),t._v(" "),t.bgPic?e("div",{staticClass:"bgpic",style:"--bgpic:url("+t.bgPic+")"}):e("div",{staticClass:"bgcolor",style:"--bgcolor:"+t.bgColor}),t._v(" "),e("div",{staticClass:"lyrics",style:"--color:"+t.color+";--activeColor:"+t.activeColor+";--lineHeight:"+t.lineHeight+"px"},[e("ul",{style:"transform:translateY("+t.scrollY+"px)"},t._l(t.text,(function(i,s){return e("li",{key:s,class:{cur:i.cur}},[t._v(t._s(i.text))])})),0)]),t._v(" "),e("audio",{ref:"media",staticStyle:{display:"none"},attrs:{src:t.audio}})],1)}),[],!1,null,null,null);e.default=l.exports}}]);