(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{229:function(t,i,s){"use strict";var e=s(3),h=s(13),n=s(14),o=s(75),c=s(73),r=s(5),a=s(96).f,f=s(97).f,g=s(8).f,l=s(98).trim,d=e.Number,x=d,u=d.prototype,p="Number"==n(s(74)(u)),w="trim"in String.prototype,v=function(t){var i=c(t,!1);if("string"==typeof i&&i.length>2){var s,e,h,n=(i=w?i.trim():l(i,3)).charCodeAt(0);if(43===n||45===n){if(88===(s=i.charCodeAt(2))||120===s)return NaN}else if(48===n){switch(i.charCodeAt(1)){case 66:case 98:e=2,h=49;break;case 79:case 111:e=8,h=55;break;default:return+i}for(var o,r=i.slice(2),a=0,f=r.length;a<f;a++)if((o=r.charCodeAt(a))<48||o>h)return NaN;return parseInt(r,e)}}return+i};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var i=arguments.length<1?0:t,s=this;return s instanceof d&&(p?r(function(){u.valueOf.call(s)}):"Number"!=n(s))?o(new x(v(i)),s,d):v(i)};for(var b,m=s(7)?a(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;m.length>I;I++)h(x,b=m[I])&&!h(d,b)&&g(d,b,f(x,b));d.prototype=u,u.constructor=d,s(10)(e,"Number",d)}},230:function(t,i,s){var e=s(2);e(e.P,"Array",{fill:s(231)}),s(101)("fill")},231:function(t,i,s){"use strict";var e=s(19),h=s(100),n=s(15);t.exports=function(t){for(var i=e(this),s=n(i.length),o=arguments.length,c=h(o>1?arguments[1]:void 0,s),r=o>2?arguments[2]:void 0,a=void 0===r?s:h(r,s);a>c;)i[c++]=t;return i}},256:function(t,i,s){},328:function(t,i,s){"use strict";var e=s(256);s.n(e).a},395:function(t,i,s){"use strict";s.r(i);s(229),s(99),s(230);var e={name:"LeeLuckDraw",inheritAttrs:!1,data:function(){return{ctx:null,haveClick:!1,deg:0,num:this.config.rollNum||6,speed:0,per:Math.PI/180,perGe:2*Math.PI/this.prizes.length,saveDeg:0,pid:0,position:0}},mounted:function(){var t=this,i=this.$refs.luckDraw;this.ctx=i.getContext("2d"),this.init(),i.addEventListener("click",function(i){var s=i.offsetX,e=i.offsetY;t.ctx.isPointInPath(s,e)&&!t.haveClick&&(t.$emit("start"),t.haveClick=!0)})},methods:{init:function(){var t=this;if(this.config.backgroundImage){var i=new Image;i.src=this.config.backgroundImage,i.onload=function(){var s=t.config.width/i.width;t.ctx.drawImage(i,0,0,i.width*s,i.height*s),t.roll(),t.waterMark(),t.btn()}}else this.ctx.save(),this.ctx.fillStyle=this.config.backgroundColor,this.ctx.beginPath(),this.ctx.arc(this.config.width/2,this.config.height/2,this.config.width/2,0,2*Math.PI),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore(),this.roll(),this.waterMark(),this.btn()},startDong:function(){this.ctx.clearRect(0,0,this.config.width,this.config.height),this.config.rotate},panBgDong:function(){if(this.ctx.save(),this.ctx.translate(this.config.width/2,this.config.height/2),this.ctx.rotate(this.deg),this.ctx.save(),this.ctx.translate(-this.config.width/2,-this.config.height/2),this.config.backgroundImage){var t=new Image;t.src=this.config.backgroundImage;var i=this.config.width/t.width;this.ctx.drawImage(t,0,0,t.width*i,t.height*i)}else this.ctx.fillStyle=this.config.backgroundColor,this.ctx.beginPath(),this.ctx.arc(this.config.width/2,this.config.height/2,this.config.width/2,0,2*Math.PI),this.ctx.closePath(),this.ctx.fill();this.ctx.restore(),this.ctx.restore(),this.dong(this.position,!0)},roll:function(){this.ctx.save(),this.ctx.translate(this.config.width/2,this.config.height/2),this.ctx.rotate(this.deg-Math.PI/2),this.ctx.save(),this.ctx.translate(-this.config.width/2,-this.config.height/2),this.ge(),this.prize(),this.ctx.restore(),this.ctx.restore()},rollDong:function(){this.ctx.save(),this.ctx.translate(this.config.width/2,this.config.height/2),this.ctx.rotate(this.deg-Math.PI/2),this.ctx.save(),this.ctx.translate(-this.config.width/2,-this.config.height/2),this.ge(),this.prize(),this.ctx.restore(),this.ctx.restore(),this.dong(this.position)},ge:function(){this.ctx.save();for(var t=0;t<this.prizes.length;t++)this.prizes[t].fonts&&(this.ctx.beginPath(),this.ctx.fillStyle=this.prizes[t].background,this.ctx.moveTo(this.config.width/2,this.config.height/2),this.ctx.arc(this.config.width/2,this.config.height/2,this.config.width/2-this.config.padding,-this.perGe*t,-this.perGe*(t+1),!0),this.ctx.closePath(),this.ctx.fill());this.ctx.restore()},prize:function(){var t=this;this.ctx.save(),this.ctx.translate(this.config.width/2,this.config.height/2),this.ctx.save();for(var i=0,s=this.config.width/2-this.config.padding,e=function(e){if(t.prizes[e].fonts){var h=t.prizes[e].fonts.top.split("%")[0],n=Math.floor(.01*h*s*Math.cos(i)),o=Math.floor(.01*h*s*Math.sin(i));t.ctx.font=t.config.fontSize+" Microsoft YaHei",t.ctx.fillStyle=t.config.fontColor,t.ctx.textBaseline="middle",t.ctx.textAlign="center",t.ctx.save(),t.ctx.fillText(t.prizes[e].fonts.text,n,o),t.ctx.restore(),t.ctx.save();var c=t.prizes[e].imgs.top.split("%")[0],r=Math.floor(.01*c*s*Math.cos(i)),a=Math.floor(.01*c*s*Math.sin(i)),f=new Image;f.src=t.prizes[e].imgs.src,f.onload=function(){var i=t.prizes[e].imgs.width.split("%")[0];t.ctx.save(),t.ctx.drawImage(f,0,0,f.width,f.height,r,a,f.width*i*.01,f.height*i*.01),t.ctx.restore()},t.ctx.restore()}i+=t.perGe},h=0;h<this.prizes.length;h++)e(h);this.ctx.restore(),this.ctx.restore()},btn:function(){var t=this;if(this.ctx.save(),this.ctx.fillStyle=this.btnConfig.background,this.ctx.beginPath(),this.ctx.arc(this.config.width/2,this.config.height/2,this.btnConfig.width/2,0,2*Math.PI),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore(),this.btnConfig.imgs)for(var i=function(i){var s=t.btnConfig.imgs[i].top.split("%")[0],e=t.btnConfig.imgs[i].width.split("%")[0];s*=.01,e*=.01;var h=new Image;h.src=t.btnConfig.imgs[i].src,h.onload=function(){t.ctx.drawImage(h,0,0,h.width,h.height,t.config.width/2-h.width*e/2,t.config.height-t.config.height*s-h.height*e/2,h.width*e,h.height*e),t.btnConfig.fonts&&t.btntext()}},s=0;s<this.btnConfig.imgs.length;s++)i(s);else this.ctx.save(),this.ctx.fillStyle=this.btnConfig.background,this.ctx.beginPath(),this.ctx.moveTo(this.config.width/2+this.btnConfig.width/2-this.btnConfig.width/8,this.config.width/2),this.ctx.lineTo(this.config.width/2-this.btnConfig.width/2+this.btnConfig.width/8,this.config.width/2),this.ctx.lineTo(this.config.width/2,this.config.width/2-1.8*this.btnConfig.width/2),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore(),this.btnConfig.fonts&&this.btntext()},btntext:function(){this.ctx.save();for(var t=0;t<this.btnConfig.fonts.length;t++){this.ctx.font=this.btnConfig.fonts[t].fontSize+" Microsoft YaHei",this.ctx.fillStyle=this.btnConfig.fonts[t].fontColor,this.ctx.textBaseline="bottom",this.ctx.textAlign="center";var i=this.btnConfig.fonts[t].top.split("%")[0];i*=.01;for(var s=Number(this.btnConfig.fonts[t].fontSize.split("px")[0]),e=this.btnConfig.fonts[t].text.split("\n"),h=0;h<e.length;h++)this.ctx.fillText(e[h],this.config.width/2,this.config.width/2+this.btnConfig.width/2-this.btnConfig.width*i+s/2+h*s)}this.ctx.restore()},waterMark:function(){this.ctx.save(),this.ctx.font="12px Microsoft YaHei",this.ctx.fillStyle="rgba(0,0,0,.2)",this.ctx.textBaseline="top",this.ctx.textAlign="left",this.ctx.fillText("Leeao版权所有",110,2),this.ctx.restore()},play:function(t){this.position=t,this.pid=setInterval(this.startDong,1)},dong:function(t,i){var s=this;if(void 0===t)this.deg=0;else{var e;e=(i&&this.prizes[0].fonts,-this.perGe/2);var h=2*this.num*Math.PI+(t-1)*this.perGe-e;this.deg>=h/2+this.saveDeg/2?(this.speed-=.01,this.speed<=.04&&(this.speed=.03)):this.speed+=.01,this.speed=Number(this.speed.toFixed(2)),this.deg+=this.per*this.speed,this.deg>=h&&(clearInterval(this.pid),this.deg=(t-1)*this.perGe-e,this.saveDeg=this.deg,this.speed=0,setTimeout(function(){s.$emit("end",s.position-1),s.haveClick=!1},100))}}},props:{btnConfig:{type:Object,default:function(){return{}}},config:{type:Object,default:function(){return{}}},prizes:{type:Array,default:function(){return[]}}}},h=(s(328),s(0)),n=Object(h.a)(e,function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"lee-luck-draw"},[i("canvas",{ref:"luckDraw",attrs:{width:this.config.width,height:this.config.height}})])},[],!1,null,"4ec01767",null);i.default=n.exports}}]);