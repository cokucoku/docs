(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{292:function(t,e,s){},389:function(t,e,s){"use strict";s(292)},540:function(t,e,s){"use strict";s.r(e);s(92);var i={name:"LeeGesturePassword",inheritAttrs:!1,data:()=>({thetype:"",left:0,top:0,isDown:!1,pos:[],tempass:[],ctx:null,dotw:0}),watch:{type:{immediate:!0,handler(t){["square","circle","leaf"].filter((function(e){return e.indexOf(t)>-1})).length<1?this.thetype="circle":this.thetype=t}}},mounted(){let t=document.getElementById("path");this.ctx=t.getContext("2d");let e=this.$refs.dot;this.dotw=e[0].offsetWidth,t.width=this.width,t.height=this.height,document.createElement("div").className="tips",this.isDown=!1,e.forEach((t,e)=>{this.pos.push({xh:e+1,x:t.offsetLeft,y:t.offsetTop})}),this.chuli(),window.addEventListener("resize",t=>{this.chuli()})},methods:{chuli(){let t=this.$refs.gesture;if(t){let e=document.documentElement.scrollTop||document.body.scrollTop,s=document.documentElement.scrollLeft||document.body.scrollLeft;this.left=t.getBoundingClientRect().left+s,this.top=t.getBoundingClientRect().top+e,t.addEventListener("mousedown",()=>{event.preventDefault(),this.isDown=!0,this.markDot(event.pageX,event.pageY),this.drawPath(event.pageX,event.pageY)}),t.addEventListener("mousemove",()=>{event.preventDefault(),this.isDown&&(this.markDot(event.pageX,event.pageY),this.drawPath(event.pageX,event.pageY))}),t.addEventListener("mouseup",()=>{this.check()}),t.addEventListener("mouseleave",()=>{this.isDown&&this.check()}),t.addEventListener("touchstart",t=>{t.preventDefault(),t.stopPropagation(),this.isDown=!0,this.markDot(t.targetTouches[0].pageX,t.targetTouches[0].pageY),this.drawPath(t.targetTouches[0].pageX,t.targetTouches[0].pageY)}),t.addEventListener("touchmove",t=>{t.preventDefault(),t.stopPropagation(),this.isDown&&(this.markDot(t.targetTouches[0].pageX,t.targetTouches[0].pageY),this.drawPath(t.targetTouches[0].pageX,t.targetTouches[0].pageY))}),t.addEventListener("touchend",t=>{t.stopPropagation(),this.check()})}},check(){let t=this.$refs.dot,e=this.$refs.gesture,s=document.createElement("div");s.className="tips",this.isDown=!1;let i="";JSON.stringify(this.password)!=JSON.stringify(this.tempass)?(e.classList.add("error"),s.innerText="密码错误",i="err",this.drawErr()):(e.classList.remove("error"),s.innerText="验证成功",i="success"),this.$emit("check",i),this.tempass=[],e.appendChild(s),setTimeout(()=>s.style.opacity=1,1),setTimeout(()=>{s.style.opacity=0,setTimeout(()=>s.remove(),500),this.ctx.clearRect(0,0,this.width,this.height),t.forEach(t=>{t.children[0].style.cssText=""}),e.classList.remove("error")},1500)},markDot(t,e){let s=t-this.left,i=e-this.top,h=this.pos.filter(t=>s-t.x<=this.dotw&&s-t.x>=0&&i-t.y<=this.dotw&&i-t.y>=0),o=this.$refs.dot;h.length>0&&(o[h[0].xh-1].querySelector("i").style.opacity="1",this.tempass.indexOf(h[0].xh)<0&&this.tempass.push(h[0].xh))},drawPath(t,e){this.ctx.clearRect(0,0,this.width,this.height);let s=t-this.left,i=e-this.top;this.ctx.lineWidth=this.pathwidth,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.strokeStyle=this.successcolor,this.ctx.beginPath();for(let t=0;t<this.tempass.length;t++)this.ctx.lineTo(this.pos[this.tempass[t]-1].x+this.dotw/2,this.pos[this.tempass[t]-1].y+this.dotw/2);this.tempass.length>0&&this.ctx.lineTo(s,i),this.ctx.stroke(),this.ctx.closePath()},drawErr(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.strokeStyle=this.errorcolor,this.ctx.beginPath();for(let t=0;t<this.tempass.length;t++)this.ctx.lineTo(this.pos[this.tempass[t]-1].x+this.dotw/2,this.pos[this.tempass[t]-1].y+this.dotw/2);this.ctx.stroke(),this.ctx.closePath()}},props:{type:{type:String,default:"circle"},width:{type:Number,default:350},height:{type:Number,default:350},password:{type:Array,default:()=>[]},successcolor:{type:String,default:"#67c23a"},errorcolor:{type:String,default:"#f56c6c"},pathwidth:{type:Number,default:8}}},h=(s(389),s(10)),o=Object(h.a)(i,(function(){var t=this._self._c;return t("div",{ref:"gesture",class:["lee-gesture-password",this.thetype],style:{width:this.width+"px",height:this.height+"px","--successcolor":this.successcolor,"--errorcolor":this.errorcolor}},[t("div",{staticStyle:{position:"absolute",top:"-20px",left:"50%"}}),this._v(" "),this._l(9,(function(e){return t("div",{key:e,staticClass:"grid"},[t("div",{ref:"dot",refInFor:!0,staticClass:"dot"},[t("i")])])})),this._v(" "),t("canvas",{attrs:{id:"path"}})],2)}),[],!1,null,null,null);e.default=o.exports}}]);