(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{229:function(t,e,s){},287:function(t,e,s){"use strict";var r=s(229);s.n(r).a},343:function(t,e,s){"use strict";s.r(e);s(53),s(24),s(15),s(26);var r={name:"LeeGesturePassword",inheritAttrs:!1,data:function(){return{left:0,top:0,isDown:!1,pos:[],tempass:[],ctx:null,cw:0,sh:0}},watch:{password:{immediate:!0,handler:function(t){}}},mounted:function(){var t=this,e=document.getElementById("path");this.ctx=e.getContext("2d");var s=this.$refs.dot,r=this.$refs.gesture,n=r.offsetWidth,i=r.offsetHeight;this.cw=n,this.sh=i,e.width=n,e.height=i;var o=document.createElement("div");o.className="tips",this.isDown=!1;var a=document.documentElement.scrollTop,c=document.documentElement.scrollLeft;this.left=r.getBoundingClientRect().left+c,this.top=r.getBoundingClientRect().top+a,s.forEach(function(e,s){t.pos.push({xh:s+1,x:e.offsetLeft,y:e.offsetTop})}),r.addEventListener("mousedown",function(){event.preventDefault(),t.isDown=!0,t.markDot(event.pageX,event.pageY),t.drawPath(event.pageX,event.pageY)}),r.addEventListener("mousemove",function(){event.preventDefault(),t.isDown&&(t.markDot(event.pageX,event.pageY),t.drawPath(event.pageX,event.pageY))}),r.addEventListener("mouseup",function(){var e=t.$refs.dot,s="";t.isDown=!1,JSON.stringify(t.password)!=JSON.stringify(t.tempass)?(r.classList.add("error"),o.innerText="密码错误",s="err",t.drawErr()):(r.classList.remove("error"),o.innerText="验证成功",s="success"),t.$emit("check",s),t.tempass=[],r.appendChild(o),setTimeout(function(){return o.style.opacity=1},1),setTimeout(function(){o.style.opacity=0,setTimeout(function(){return o.remove()},500),t.ctx.clearRect(0,0,t.cw,t.sh),e.forEach(function(t){t.children[0].style.cssText=""}),r.classList.remove("error")},1500)}),r.addEventListener("touchstart",function(){event.preventDefault(),t.isDown=!0,t.markDot(event.targetTouches[0].pageX,event.targetTouches[0].pageY),t.drawPath(event.targetTouches[0].pageX,event.targetTouches[0].pageY)}),r.addEventListener("touchmove",function(){event.preventDefault(),t.isDown&&(t.markDot(event.targetTouches[0].pageX,event.targetTouches[0].pageY),t.drawPath(event.targetTouches[0].pageX,event.targetTouches[0].pageY))}),r.addEventListener("touchend",function(){var e=t.$refs.dot;t.isDown=!1;var s="";JSON.stringify(t.password)!=JSON.stringify(t.tempass)?(r.classList.add("error"),o.innerText="密码错误",s="err",t.drawErr()):(r.classList.remove("error"),o.innerText="验证成功",s="success"),t.$emit("check",s),t.tempass=[],r.appendChild(o),setTimeout(function(){return o.style.opacity=1},1),setTimeout(function(){o.style.opacity=0,setTimeout(function(){return o.remove()},500),t.ctx.clearRect(0,0,t.cw,t.sh),e.forEach(function(t){t.children[0].style.cssText=""}),r.classList.remove("error")},1500)})},methods:{markDot:function(t,e){var s=t-this.left,r=e-this.top,n=this.pos.filter(function(t){return s-t.x<=80&&s-t.x>=0&&r-t.y<=80&&r-t.y>=0}),i=this.$refs.dot;n.length>0&&(i[n[0].xh-1].querySelector("i").style.opacity="1",this.tempass.indexOf(n[0].xh)<0&&this.tempass.push(n[0].xh))},drawPath:function(t,e){this.ctx.clearRect(0,0,this.cw,this.sh);var s=t-this.left,r=e-this.top;this.ctx.lineWidth=8,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.strokeStyle=this.successcolor,this.ctx.beginPath();for(var n=0;n<this.tempass.length;n++)this.ctx.lineTo(this.pos[this.tempass[n]-1].x+40,this.pos[this.tempass[n]-1].y+40);this.tempass.length>0&&this.ctx.lineTo(s,r),this.ctx.stroke(),this.ctx.closePath()},drawErr:function(){this.ctx.clearRect(0,0,this.cw,this.sh),this.ctx.strokeStyle=this.errorcolor,this.ctx.beginPath();for(var t=0;t<this.tempass.length;t++)this.ctx.lineTo(this.pos[this.tempass[t]-1].x+40,this.pos[this.tempass[t]-1].y+40);this.ctx.stroke(),this.ctx.closePath()}},props:{password:{type:Array,default:function(){return[]}},successcolor:{type:String,default:"#67c23a"},errorcolor:{type:String,default:"#f56c6c"}}},n=(s(287),s(0)),i=Object(n.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"gesture",staticClass:"lee-gesture-password",style:{"--successcolor":this.successcolor,"--errorcolor":this.errorcolor}},[this._l(9,function(t){return e("div",{key:t,staticClass:"grid"},[e("div",{ref:"dot",refInFor:!0,staticClass:"dot"},[e("i")])])}),this._v(" "),e("canvas",{attrs:{id:"path"}})],2)},[],!1,null,null,null);e.default=i.exports}}]);